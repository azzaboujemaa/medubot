<!-- ðŸ”¹ TOPBAR -->
<div class="relative w-full h-16 flex items-center justify-end px-6
     bg-gradient-to-r from-blue-800/40 to-blue-600/40 
     backdrop-blur-xl shadow-md rounded-xl mb-4">

  <!-- ðŸ”” Notifications -->
  <button class="relative mr-6" (click)="toggleNotifications()">
    <i class="fas fa-bell text-2xl text-gray-200 hover:text-white"></i>

    <!-- Badge rouge -->
    <span *ngIf="unreadCount > 0"
          class="absolute top-0 right-0 w-2 h-2 bg-red-500 rounded-full"></span>
  </button>

  <!-- ðŸ‘¤ User section -->
  <div class="relative">

    <div class="flex items-center space-x-3 cursor-pointer"
         (click)="toggleDropdown()">

      <!-- Photo user -->
      <div class="w-10 h-10 rounded-full overflow-hidden border border-white/30">
        <img src="assets/images/user.jpg" class="w-full h-full object-cover">
      </div>

      <!-- Nom user -->
      <span class="font-medium text-white text-lg">
        Imen ben haj khalifa
      </span>

      <!-- flÃ¨che -->
      <i class="fas fa-chevron-down text-white"></i>
    </div>

    <!-- ðŸ”½ Dropdown Menu -->
    <div *ngIf="dropdownOpen"
         class="absolute right-0 mt-3 w-40 bg-white text-gray-700 rounded-lg shadow-xl py-2 z-50">

      <button class="w-full text-left px-4 py-2 hover:bg-gray-100"
              (click)="goProfile()">
        <i class="fas fa-user mr-2"></i> Profil
      </button>

      <button class="w-full text-left px-4 py-2 hover:bg-gray-100 text-red-500"
              (click)="logout()">
        <i class="fas fa-sign-out-alt mr-2"></i> DÃ©connexion
      </button>

    </div>

  </div>
</div>

<!-- ðŸ”” NOTIFICATIONS MODAL -->
<div *ngIf="notificationOpen"
     class="fixed inset-0 bg-black/30 z-40"
     (click)="closeNotifications()">

  <div class="absolute right-6 top-20 w-96 bg-white rounded-xl shadow-2xl z-50"
       (click)="$event.stopPropagation()">

    <!-- Header -->
    <div class="flex items-center justify-between px-4 py-3 border-b">
      <h3 class="font-semibold text-gray-800 text-lg">Notifications</h3>
      <button (click)="closeNotifications()" class="text-gray-500 hover:text-black">
        âœ•
      </button>
    </div>

    <!-- List -->
    <div class="max-h-96 overflow-y-auto">

      <div *ngFor="let notif of notifications"
           class="flex gap-3 px-4 py-3 hover:bg-gray-100 cursor-pointer border-b">

        <i class="fas fa-envelope text-blue-500 mt-1"></i>

        <div>
          <p class="text-sm font-semibold text-gray-800">
            Nouveau message
          </p>

         <p class="text-sm text-gray-600">
  {{ notif.content }}
</p>

<span class="text-xs text-gray-400">
  {{ notif.createdAt?.toDate() | date:'short' }}
</span>
        </div>

      </div>

    </div>

    <!-- âœ… FOOTER (AU BON ENDROIT) -->
    <button
      (click)="openAllMessages()"
      class="w-full py-3 text-sm font-medium text-blue-600 hover:bg-gray-50 border-t">
      Voir tous les messages
    </button>

  </div>
</div>
